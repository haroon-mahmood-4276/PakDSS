/*! 
 * jQuery DataTables Checkboxes (https://www.gyrocode.com/projects/jquery-datatables-checkboxes/)
 * Checkboxes extension for jQuery DataTables
 *
 * @version     1.2.12
 * @author      Gyrocode LLC (https://www.gyrocode.com)
 * @copyright   (c) Gyrocode LLC
 * @license     MIT
 */
!function(factory){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function($){return factory($,window,document)})):"object"==typeof exports?module.exports=function(root,$){return root||(root=window),$&&$.fn.dataTable||($=require("datatables.net")(root,$).$),factory($,root,root.document)}:factory(jQuery,window,document)}((function($,window,document){"use strict";var DataTable=$.fn.dataTable,Checkboxes=function(settings){if(!DataTable.versionCheck||!DataTable.versionCheck("1.10.8"))throw"DataTables Checkboxes requires DataTables 1.10.8 or newer";this.s={dt:new DataTable.Api(settings),columns:[],data:[],dataDisabled:[],ignoreSelect:!1},this.s.ctx=this.s.dt.settings()[0],this.s.ctx.checkboxes||(settings.checkboxes=this,this._constructor())};Checkboxes.prototype={_constructor:function(){for(var self=this,dt=self.s.dt,ctx=self.s.ctx,hasCheckboxes=!1,hasCheckboxesSelectRow=!1,i=0;i<ctx.aoColumns.length;i++)if(ctx.aoColumns[i].checkboxes){var $colHeader=$(dt.column(i).header());hasCheckboxes=!0,$.isPlainObject(ctx.aoColumns[i].checkboxes)||(ctx.aoColumns[i].checkboxes={}),ctx.aoColumns[i].checkboxes=$.extend({},Checkboxes.defaults,ctx.aoColumns[i].checkboxes);var colOptions={searchable:!1,orderable:!1};if(""===ctx.aoColumns[i].sClass?colOptions.className="dt-checkboxes-cell":colOptions.className=ctx.aoColumns[i].sClass+" dt-checkboxes-cell",null===ctx.aoColumns[i].sWidthOrig&&(colOptions.width="1%"),null===ctx.aoColumns[i].mRender&&(colOptions.render=function(){return'<input type="checkbox" class="dt-checkboxes" autocomplete="off">'}),DataTable.ext.internal._fnColumnOptions(ctx,i,colOptions),$colHeader.removeClass("sorting"),$colHeader.off(".dt"),null===ctx.sAjaxSource){var cells=dt.cells("tr",i);cells.invalidate("data"),$(cells.nodes()).addClass(colOptions.className)}if(self.s.data[i]={},self.s.dataDisabled[i]={},self.s.columns.push(i),ctx.aoColumns[i].checkboxes.selectRow&&(ctx._select?hasCheckboxesSelectRow=!0:ctx.aoColumns[i].checkboxes.selectRow=!1),ctx.aoColumns[i].checkboxes.selectAll&&($colHeader.data("html",$colHeader.html()),null!==ctx.aoColumns[i].checkboxes.selectAllRender)){var selectAllHtml="";$.isFunction(ctx.aoColumns[i].checkboxes.selectAllRender)?selectAllHtml=ctx.aoColumns[i].checkboxes.selectAllRender():"string"==typeof ctx.aoColumns[i].checkboxes.selectAllRender&&(selectAllHtml=ctx.aoColumns[i].checkboxes.selectAllRender),$colHeader.html(selectAllHtml).addClass("dt-checkboxes-select-all").attr("data-col",i)}}if(hasCheckboxes){self.loadState();var $table=$(dt.table().node()),$tableBody=$(dt.table().body()),$tableContainer=$(dt.table().container());hasCheckboxesSelectRow&&($table.addClass("dt-checkboxes-select"),$table.on("user-select.dt.dtCheckboxes",(function(e,dt,type,cell,originalEvent){self.onDataTablesUserSelect(e,dt,type,cell,originalEvent)})),$table.on("select.dt.dtCheckboxes deselect.dt.dtCheckboxes",(function(e,api,type,indexes){self.onDataTablesSelectDeselect(e,type,indexes)})),ctx._select.info&&(dt.select.info(!1),$table.on("draw.dt.dtCheckboxes select.dt.dtCheckboxes deselect.dt.dtCheckboxes",(function(){self.showInfoSelected()})))),$table.on("draw.dt.dtCheckboxes",(function(e){self.onDataTablesDraw(e)})),$tableBody.on("click.dtCheckboxes","input.dt-checkboxes",(function(e){self.onClick(e,this)})),$tableContainer.on("click.dtCheckboxes",'thead th.dt-checkboxes-select-all input[type="checkbox"]',(function(e){self.onClickSelectAll(e,this)})),$tableContainer.on("click.dtCheckboxes","thead th.dt-checkboxes-select-all",(function(){$('input[type="checkbox"]',this).not(":disabled").trigger("click")})),hasCheckboxesSelectRow||$tableContainer.on("click.dtCheckboxes","tbody td.dt-checkboxes-cell",(function(){$('input[type="checkbox"]',this).not(":disabled").trigger("click")})),$tableContainer.on("click.dtCheckboxes","thead th.dt-checkboxes-select-all label, tbody td.dt-checkboxes-cell label",(function(e){e.preventDefault()})),$(document).on("click.dtCheckboxes",'.fixedHeader-floating thead th.dt-checkboxes-select-all input[type="checkbox"]',(function(e){ctx._fixedHeader&&ctx._fixedHeader.dom.header.floating&&self.onClickSelectAll(e,this)})),$(document).on("click.dtCheckboxes",".fixedHeader-floating thead th.dt-checkboxes-select-all",(function(){ctx._fixedHeader&&ctx._fixedHeader.dom.header.floating&&$('input[type="checkbox"]',this).trigger("click")})),$table.on("init.dt.dtCheckboxes",(function(){setTimeout((function(){self.onDataTablesInit()}),0)})),$table.on("stateSaveParams.dt.dtCheckboxes",(function(e,settings,data){self.onDataTablesStateSave(e,settings,data)})),$table.one("destroy.dt.dtCheckboxes",(function(e,settings){self.onDataTablesDestroy(e,settings)}))}},onDataTablesInit:function(){var self=this,dt=self.s.dt,ctx=self.s.ctx;ctx.oFeatures.bServerSide||(ctx.oFeatures.bStateSave&&self.updateState(),$(dt.table().node()).on("xhr.dt.dtCheckboxes",(function(e,settings,json,xhr){self.onDataTablesXhr(e.settings,json,xhr)})))},onDataTablesUserSelect:function(e,dt,type,cell){var self=this,cellIdx,rowIdx=cell.index().row,colIdx=this.getSelectRowColIndex(),cellData=dt.cell({row:rowIdx,column:colIdx}).data();this.isCellSelectable(colIdx,cellData)||e.preventDefault()},onDataTablesSelectDeselect:function(e,type,indexes){var self=this,dt=this.s.dt;if(!this.s.ignoreSelect&&"row"===type){var colIdx=this.getSelectRowColIndex();if(null!==colIdx){var cells=dt.cells(indexes,colIdx);this.updateData(cells,colIdx,"select"===e.type),this.updateCheckbox(cells,colIdx,"select"===e.type),this.updateSelectAll(colIdx)}}},onDataTablesStateSave:function(e,settings,data){var self=this,ctx=self.s.ctx;data.checkboxes=[],$.each(self.s.columns,(function(index,colIdx){ctx.aoColumns[colIdx].checkboxes.stateSave&&(data.checkboxes[colIdx]=self.s.data[colIdx])}))},onDataTablesDestroy:function(){var self=this,dt=this.s.dt,$table=$(dt.table().node()),$tableBody=$(dt.table().body()),$tableContainer=$(dt.table().container());$(document).off("click.dtCheckboxes"),$tableContainer.off(".dtCheckboxes"),$tableBody.off(".dtCheckboxes"),$table.off(".dtCheckboxes"),this.s.data={},this.s.dataDisabled={},$(".dt-checkboxes-select-all",$table).each((function(index,el){$(el).html($(el).data("html")).removeClass("dt-checkboxes-select-all")}))},onDataTablesDraw:function(){var self=this,ctx=self.s.ctx;(ctx.oFeatures.bServerSide||ctx.oFeatures.bDeferRender)&&self.updateStateCheckboxes({page:"current",search:"none"}),$.each(self.s.columns,(function(index,colIdx){self.updateSelectAll(colIdx)}))},onDataTablesXhr:function(){var self=this,dt=self.s.dt,ctx=self.s.ctx,$table=$(dt.table().node());$.each(self.s.columns,(function(index,colIdx){self.s.data[colIdx]={},self.s.dataDisabled[colIdx]={}})),ctx.oFeatures.bStateSave&&(self.loadState(),$table.one("draw.dt.dtCheckboxes",(function(){self.updateState()})))},updateData:function(cells,colIdx,isSelected){var self=this,dt=this.s.dt,ctx=this.s.ctx,cellsData;ctx.aoColumns[colIdx].checkboxes&&(cells.data().each((function(cellData){isSelected?ctx.checkboxes.s.data[colIdx][cellData]=1:delete ctx.checkboxes.s.data[colIdx][cellData]})),ctx.oFeatures.bStateSave&&ctx.aoColumns[colIdx].checkboxes.stateSave&&dt.state.save())},updateSelect:function(selector,isSelected){var self=this,dt=this.s.dt,ctx;this.s.ctx._select&&(this.s.ignoreSelect=!0,isSelected?dt.rows(selector).select():dt.rows(selector).deselect(),this.s.ignoreSelect=!1)},updateCheckbox:function(cells,colIdx,isSelected){var self=this,ctx=this.s.ctx,cellNodes=cells.nodes();cellNodes.length&&($("input.dt-checkboxes",cellNodes).not(":disabled").prop("checked",isSelected),$.isFunction(ctx.aoColumns[colIdx].checkboxes.selectCallback)&&ctx.aoColumns[colIdx].checkboxes.selectCallback(cellNodes,isSelected))},updateState:function(){var self=this,dt=self.s.dt,ctx=self.s.ctx;self.updateStateCheckboxes({page:"all",search:"none"}),ctx._oFixedColumns&&setTimeout((function(){$.each(self.s.columns,(function(index,colIdx){self.updateSelectAll(colIdx)}))}),0)},updateStateCheckboxes:function(opts){var self=this,dt=self.s.dt,ctx=self.s.ctx;dt.cells("tr",self.s.columns,opts).every((function(rowIdx,colIdx){var cellData=this.data(),isCellSelectable=self.isCellSelectable(colIdx,cellData);ctx.checkboxes.s.data[colIdx].hasOwnProperty(cellData)&&(self.updateCheckbox(this,colIdx,!0),ctx.aoColumns[colIdx].checkboxes.selectRow&&isCellSelectable&&self.updateSelect(rowIdx,!0)),isCellSelectable||$("input.dt-checkboxes",this.node()).prop("disabled",!0)}))},onClick:function(e,ctrl){var self=this,dt=self.s.dt,ctx=self.s.ctx,cellSelector,$cell=$(ctrl).closest("td");cellSelector=$cell.parents(".DTFC_Cloned").length?dt.fixedColumns().cellIndex($cell):$cell;var cell=dt.cell(cellSelector),cellIdx,colIdx=cell.index().column;ctx.aoColumns[colIdx].checkboxes.selectRow?setTimeout((function(){var cellData=cell.data(),hasData=self.s.data[colIdx].hasOwnProperty(cellData);hasData!==ctrl.checked&&(self.updateCheckbox(cell,colIdx,hasData),self.updateSelectAll(colIdx))}),0):(cell.checkboxes.select(ctrl.checked),e.stopPropagation())},onClickSelectAll:function(e,ctrl){var self=this,dt=this.s.dt,ctx=this.s.ctx,colIdx=null,$th=$(ctrl).closest("th"),cellIdx;$th.parents(".DTFC_Cloned").length?colIdx=dt.fixedColumns().cellIndex($th).column:colIdx=dt.column($th).index();$(ctrl).data("is-changed",!0),dt.column(colIdx,{page:ctx.aoColumns[colIdx].checkboxes&&ctx.aoColumns[colIdx].checkboxes.selectAllPages?"all":"current",search:"applied"}).checkboxes.select(ctrl.checked),e.stopPropagation()},loadState:function(){var self=this,dt=self.s.dt,ctx=self.s.ctx;if(ctx.oFeatures.bStateSave){var state=dt.state.loaded();$.each(self.s.columns,(function(index,colIdx){state&&state.checkboxes&&state.checkboxes.hasOwnProperty(colIdx)&&ctx.aoColumns[colIdx].checkboxes.stateSave&&(self.s.data[colIdx]=state.checkboxes[colIdx])}))}},updateSelectAll:function(colIdx){var self=this,dt=self.s.dt,ctx=self.s.ctx;if(ctx.aoColumns[colIdx].checkboxes&&ctx.aoColumns[colIdx].checkboxes.selectAll){var cells=dt.cells("tr",colIdx,{page:ctx.aoColumns[colIdx].checkboxes.selectAllPages?"all":"current",search:"applied"}),$tableContainer=dt.table().container(),$checkboxesSelectAll=$('.dt-checkboxes-select-all[data-col="'+colIdx+'"] input[type="checkbox"]',$tableContainer),countChecked=0,countDisabled=0,cellsData=cells.data(),isSelected,isIndeterminate;$.each(cellsData,(function(index,cellData){self.isCellSelectable(colIdx,cellData)?self.s.data[colIdx].hasOwnProperty(cellData)&&countChecked++:countDisabled++})),ctx._fixedHeader&&ctx._fixedHeader.dom.header.floating&&($checkboxesSelectAll=$('.fixedHeader-floating .dt-checkboxes-select-all[data-col="'+colIdx+'"] input[type="checkbox"]')),0===countChecked?(isSelected=!1,isIndeterminate=!1):countChecked+countDisabled===cellsData.length?(isSelected=!0,isIndeterminate=!1):(isSelected=!0,isIndeterminate=!0);var isChanged=$checkboxesSelectAll.data("is-changed"),isSelectedNow=$checkboxesSelectAll.prop("checked"),isIndeterminateNow=$checkboxesSelectAll.prop("indeterminate");(isChanged||isSelectedNow!==isSelected||isIndeterminateNow!==isIndeterminate)&&($checkboxesSelectAll.data("is-changed",!1),$checkboxesSelectAll.prop({checked:!isIndeterminate&&isSelected,indeterminate:isIndeterminate}),$.isFunction(ctx.aoColumns[colIdx].checkboxes.selectAllCallback)&&ctx.aoColumns[colIdx].checkboxes.selectAllCallback($checkboxesSelectAll.closest("th").get(0),isSelected,isIndeterminate))}},showInfoSelected:function(){var self=this,dt=this.s.dt,ctx=this.s.ctx;if(ctx.aanFeatures.i){var colIdx=this.getSelectRowColIndex();if(null!==colIdx){var countRows=0;for(var cellData in ctx.checkboxes.s.data[colIdx])ctx.checkboxes.s.data[colIdx].hasOwnProperty(cellData)&&countRows++;var add=function($el,name,num){$el.append($('<span class="select-item"/>').append(dt.i18n("select."+name+"s",{_:"%d "+name+"s selected",0:"",1:"1 "+name+" selected"},num)))};$.each(ctx.aanFeatures.i,(function(i,el){var $el=$(el),$output=$('<span class="select-info"/>');add($output,"row",countRows);var $existing=$el.children("span.select-info");$existing.length&&$existing.remove(),""!==$output.text()&&$el.append($output)}))}}},isCellSelectable:function(colIdx,cellData){var self=this,ctx;return!this.s.ctx.checkboxes.s.dataDisabled[colIdx].hasOwnProperty(cellData)},getCellIndex:function(cell){var self=this,dt=this.s.dt,ctx;return this.s.ctx._oFixedColumns?dt.fixedColumns().cellIndex(cell):dt.cell(cell).index()},getSelectRowColIndex:function(){for(var self=this,ctx=this.s.ctx,colIdx=null,i=0;i<ctx.aoColumns.length;i++)if(ctx.aoColumns[i].checkboxes&&ctx.aoColumns[i].checkboxes.selectRow){colIdx=i;break}return colIdx},updateFixedColumn:function(colIdx){var self=this,dt=self.s.dt,ctx=self.s.ctx;if(ctx._oFixedColumns){var leftCols=ctx._oFixedColumns.s.iLeftColumns,rightCols=ctx.aoColumns.length-ctx._oFixedColumns.s.iRightColumns-1;(colIdx<leftCols||colIdx>rightCols)&&(dt.fixedColumns().update(),setTimeout((function(){$.each(self.s.columns,(function(index,colIdx){self.updateSelectAll(colIdx)}))}),0))}}},Checkboxes.defaults={stateSave:!0,selectRow:!1,selectAll:!0,selectAllPages:!0,selectCallback:null,selectAllCallback:null,selectAllRender:'<input type="checkbox" autocomplete="off">'};var Api=$.fn.dataTable.Api;return Api.register("checkboxes()",(function(){return this})),Api.registerPlural("columns().checkboxes.select()","column().checkboxes.select()",(function(state){return void 0===state&&(state=!0),this.iterator("column-rows",(function(ctx,colIdx,i,j,rowsIdx){if(ctx.aoColumns[colIdx].checkboxes){var selector=[];$.each(rowsIdx,(function(index,rowIdx){selector.push({row:rowIdx,column:colIdx})}));var cells=this.cells(selector),cellsData=cells.data(),rowsSelectableIdx=[];selector=[],$.each(cellsData,(function(index,cellData){ctx.checkboxes.isCellSelectable(colIdx,cellData)&&(selector.push({row:rowsIdx[index],column:colIdx}),rowsSelectableIdx.push(rowsIdx[index]))})),cells=this.cells(selector),ctx.checkboxes.updateData(cells,colIdx,state),ctx.checkboxes.updateCheckbox(cells,colIdx,state),ctx.aoColumns[colIdx].checkboxes.selectRow&&ctx.checkboxes.updateSelect(rowsSelectableIdx,state),ctx.checkboxes.updateSelectAll(colIdx),ctx.checkboxes.updateFixedColumn(colIdx)}}),1)})),Api.registerPlural("cells().checkboxes.select()","cell().checkboxes.select()",(function(state){return void 0===state&&(state=!0),this.iterator("cell",(function(ctx,rowIdx,colIdx){if(ctx.aoColumns[colIdx].checkboxes){var cells=this.cells([{row:rowIdx,column:colIdx}]),cellData=this.cell({row:rowIdx,column:colIdx}).data();ctx.checkboxes.isCellSelectable(colIdx,cellData)&&(ctx.checkboxes.updateData(cells,colIdx,state),ctx.checkboxes.updateCheckbox(cells,colIdx,state),ctx.aoColumns[colIdx].checkboxes.selectRow&&ctx.checkboxes.updateSelect(rowIdx,state),ctx.checkboxes.updateSelectAll(colIdx),ctx.checkboxes.updateFixedColumn(colIdx))}}),1)})),Api.registerPlural("cells().checkboxes.enable()","cell().checkboxes.enable()",(function(state){return void 0===state&&(state=!0),this.iterator("cell",(function(ctx,rowIdx,colIdx){if(ctx.aoColumns[colIdx].checkboxes){var cell=this.cell({row:rowIdx,column:colIdx}),cellData=cell.data();state?delete ctx.checkboxes.s.dataDisabled[colIdx][cellData]:ctx.checkboxes.s.dataDisabled[colIdx][cellData]=1;var cellNode=cell.node();cellNode&&$("input.dt-checkboxes",cellNode).prop("disabled",!state),ctx.aoColumns[colIdx].checkboxes.selectRow&&ctx.checkboxes.s.data[colIdx].hasOwnProperty(cellData)&&ctx.checkboxes.updateSelect(rowIdx,state)}}),1)})),Api.registerPlural("cells().checkboxes.disable()","cell().checkboxes.disable()",(function(state){return void 0===state&&(state=!0),this.checkboxes.enable(!state)})),Api.registerPlural("columns().checkboxes.deselect()","column().checkboxes.deselect()",(function(state){return void 0===state&&(state=!0),this.checkboxes.select(!state)})),Api.registerPlural("cells().checkboxes.deselect()","cell().checkboxes.deselect()",(function(state){return void 0===state&&(state=!0),this.checkboxes.select(!state)})),Api.registerPlural("columns().checkboxes.deselectAll()","column().checkboxes.deselectAll()",(function(){return this.iterator("column",(function(ctx,colIdx){ctx.aoColumns[colIdx].checkboxes&&(ctx.checkboxes.s.data[colIdx]={},this.column(colIdx).checkboxes.select(!1))}),1)})),Api.registerPlural("columns().checkboxes.selected()","column().checkboxes.selected()",(function(){return this.iterator("column-rows",(function(ctx,colIdx,i,j,rowsIdx){if(ctx.aoColumns[colIdx].checkboxes){var data=[];if(ctx.oFeatures.bServerSide)$.each(ctx.checkboxes.s.data[colIdx],(function(cellData){ctx.checkboxes.isCellSelectable(colIdx,cellData)&&data.push(cellData)}));else{var selector=[];$.each(rowsIdx,(function(index,rowIdx){selector.push({row:rowIdx,column:colIdx})}));var cells,cellsData=this.cells(selector).data();$.each(cellsData,(function(index,cellData){ctx.checkboxes.s.data[colIdx].hasOwnProperty(cellData)&&ctx.checkboxes.isCellSelectable(colIdx,cellData)&&data.push(cellData)}))}return data}return[]}),1)})),Checkboxes.version="1.2.12",$.fn.DataTable.Checkboxes=Checkboxes,$.fn.dataTable.Checkboxes=Checkboxes,$(document).on("preInit.dt.dtCheckboxes",(function(e,settings){"dt"===e.namespace&&new Checkboxes(settings)})),Checkboxes}));